<% content_for :title, "Music Selections" %>
<%= turbo_frame_tag "music_selections" do %>
  <div class="pt-8 gap-4">
    <div class="flex justify-between items-center">
      <div>
        <h2>Music Selections</h2>
        <% if @contest_entry.music_complete? %>
          <p class="text-sm text-green-600 font-medium mt-1">âœ“ Complete (3/3 pieces selected)</p>
        <% else %>
          <p class="text-sm text-gray-600 mt-1">
            <%= @contest_entry.music_selections.count %>/3 pieces selected
          </p>
        <% end %>
      </div>
      <% if current_user.contest_entries.include?(@contest_entry) && @contest_entry.music_selections.any? %>
        <div>
          <%= link_to "Change Performance Order",
                      bulk_edit_contest_entry_selections_path(entry_id: @contest_entry.id),
                      class: "btn-secondary",
                      data: { turbo_frame: "music_selections" } %>
        </div>
      <% end %>
    </div>

    <%= render "contest_entries/previous_music_prompt" if @show_copy_prompt %>

    <div class="space-y-6">
      <%= render "contest_entries/music_slot", slot_type: :prescribed, slot_number: 1 %>
      <%= render "contest_entries/music_slot", slot_type: :custom, slot_number: 1 %>
      <%= render "contest_entries/music_slot", slot_type: :custom, slot_number: 2 %>
    </div>
  </div>
<% end %>
