<div class="flex justify-between">
  <!-- Setup and scheduling status messaging -->
  <% if current_user.manages_contest(@schedule.contest.id) %>
    <% if !@schedule.contest.setup_complete? %>
      <div class="flex items-center justify-between gap-3 flex-1">
        <div
          class="
            flex items-center gap-2 px-3 py-2 bg-amber-50 border border-amber-200 rounded-md
          "
        >
          <span class="text-amber-600">⚠️</span>
          <span class="text-sm font-medium text-amber-800">Contest Setup Required</span>
        </div>
        <div>
          <%= link_to "Set Up Contest",
          contest_setup_path(@schedule.contest.id),
          class: "btn-primary-sm",
          data: {
            turbo_frame: "_top",
          } %>
        </div>
      </div>
    <% elsif @schedule.days.length == 0 %>
      <div class="flex items-center gap-3 flex-1">
        <%= link_to "Reconfigure",
        contest_setup_path(@schedule.contest.id),
        class: "btn-danger-sm",
        data: {
          turbo_frame: "_top",
        } %>
      </div>
    <% end %>
  <% end %>
  <!-- Action buttons -->
  <div class="flex gap-2">
    <% if schedule.days.length == 0 && schedule.contest.performance_phases.any? %>
      <%= button_to "Generate Schedule",
      generate_schedule_path(
        schedule,
        start_time: schedule.contest.contest_start.beginning_of_day + (8 * 60 * 60),
        end_time: schedule.contest.contest_end.beginning_of_day + (17 * 60 * 60),
      ),
      method: :post,
      class: "btn-primary-sm" %>
    <% elsif schedule.days.length > 0 %>
      <%= button_to "Reset contest schedule",
      reset_schedule_path(schedule),
      method: :post,
      class: "btn-danger-sm",
      form: {
        data: {
          turbo_confirm: "Are you sure?",
        },
      } %>
    <% end %>
  </div>

</div>
