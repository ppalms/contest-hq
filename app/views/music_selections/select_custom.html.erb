<%= turbo_frame_tag "music_slot_custom_#{@slot_number}" do %>
  <div class="p-6 bg-white rounded-lg border-2 border-blue-500">
    <div class="mb-4">
      <h3 class="text-lg font-semibold text-gray-900">Add Custom Music</h3>
      <p class="text-sm text-gray-600">Enter a piece not on the prescribed list</p>
    </div>

    <%= form_with(model: @music_selection, url: contest_entry_selections_path(entry_id: @contest_entry.id), class: "space-y-4") do |form| %>
      <%= form.hidden_field :contest_entry_id, value: @contest_entry.id %>

      <div>
        <%= form.label :title, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_field :title, class: "text-field w-full", autofocus: true %>
      </div>

      <div>
        <%= form.label :composer, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_field :composer, class: "text-field w-full" %>
      </div>

      <% if @music_selection.errors.any? %>
        <div class="rounded-md bg-red-50 p-4">
          <div class="text-sm text-red-800">
            <ul class="list-disc list-inside space-y-1">
              <% @music_selection.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>

      <div class="flex justify-end gap-2">
        <%= link_to "Cancel",
          contest_entry_path(@contest_entry.contest, @contest_entry),
          class: "btn-secondary",
          data: { turbo_frame: "_top" } %>
        <%= form.submit "Save", class: "btn-primary" %>
      </div>
    <% end %>
  </div>
<% end %>
